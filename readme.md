# WebSocket MitM Demonstration with FastAPI and Docker

## Описание

Проект демонстрирует атаку "человек посередине" (MitM) на WebSocket соединение, используя FastAPI и Docker. Включает в
себя WebSocket сервер, прокси-сервер для перехвата сообщений и клиентскую часть для отправки зашифрованных сообщений
через прокси.

Цель проекта - показать риски, связанные с передачей данных через незащищённые каналы, и возможность перехвата данных
злоумышленниками.

Для шифрования используется алгоритм AES. Клиентская часть отправляет сообщения на сервер, используя ключ шифрования.
Прокси-сервер, зная ключ шифрования, перехватывает сообщения, расшифровывает их и залогирует. И повторно отправляет
сообщения на сервер.

## Начало работы

Для запуска проекта вам понадобится только Docker. Все зависимости, включая версию Python и необходимые библиотеки, уже
определены в Docker-контейнерах проекта.

### Запуск сервера и прокси-сервера

1. **Запуск FastAPI сервера помощью Docker Compose.**

   В корневой директории проекта выполните команду:

    ```bash
    docker-compose up --build
    ```

   Эта команда запустит и сервер. По умолчанию сервер будет доступен на `ws://localhost:8000/ws/`.

### Запуск прокси-сервера отдельно

Чтобы запустить прокси-сервер , выполните следующие шаги:

1. Получите доступ к терминалу контейнера бэкенда:

    ```bash
    docker exec -it <container_name_or_id> bash
    ```

2. Внутри контейнера перейдите в директорию прокси-сервера и запустите его:

    ```bash
    cd /root_app/backend/app/proxy
    python mitm_proxy.py
    ```

   Прокси-сервер будет доступен на `ws://localhost:8765/ws/`.

### Использование клиентского скрипта для отправки сообщений

Клиентский скрипт предназначен для отправки зашифрованных сообщений на сервер через прокси. Убедитесь, что он настроен
на отправку сообщений на адрес прокси-сервера `ws://localhost:8765/ws/`.

Для запуска клиентского скрипта используйте следующую команду в отдельном терминале на вашем хосте:

1. Получите доступ к терминалу контейнера бэкенда:

    ```bash
    docker exec -it <container_name_or_id> bash
    ```
2. Внутри контейнера перейдите в директорию клиентского скрипта и запустите его:

    ```bash
    cd /root_app/backend/app/tests
    pytest send_messages_test.py
    ```

## Демонстрация атаки MitM

После запуска всех компонентов, отправьте сообщения с помощью клиентского скрипта. Прокси-сервер перехватит эти
сообщения, расшифрует их и залогирует. Вы сможете наблюдать перехваченные и расшифрованные сообщения в логах
прокси-сервера, по пути `/root_app/backend/app/proxy/proxy_logs.txt`.
